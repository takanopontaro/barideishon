switch (this.item.type) {
  case 'checkbox':
  case 'radio':
    return this.item.el.checked;
  case 'textarea':
  case 'hidden':
  case 'text':
  case 'search':
  case 'tel':
  case 'url':
  case 'email':
  case 'password':
  case 'datetime':
  case 'date':
  case 'month':
  case 'week':
  case 'time':
  case 'datetime-local':
  case 'number':
  case 'range':
  case 'color':
  case 'checkbox':
  case 'radio':
  case 'file':
  case 'submit':
  case 'image':
  case 'reset':
  case 'button':
    return this.item.el.value.trim() === '';
}

ValidityState:
badInput
customError
patternMismatch
rangeOverflow
rangeUnderflow
stepMismatch
tooLong
tooShort
typeMismatch
valid
valueMissing




HTML5を利用した控えめなバリデータ。

HTML
<form id="myform">
  <label>New Password: <input type="password" data-valli='{"equal":{"partner":"#pw2","errid":"#err"}}' id="pw1" required></label><br>
  <label>(Confirmation): <input type="password" data-valli='{"equal":{"partner":"#pw1","errid":"#err"}}' id="pw2" required></label>
  <div id="err"></div>
  <input type="submit" id="btn">
</form>

JS
const btn = document.querySelector('#btn');
const form = document.querySelector('#myform');
const controls = Array.from(document.querySelectorAll('#myform input'));
const valli = new Valli({ form, controls });

function callback(ev) {
  const { el, valid, custom: { equal } } = ev.detail;
  const err = document.querySelector(equal.errid);
  if (!valid) {
    err.innerHTML = equal.valid ? '' : 'two inputs must be equal';
    el.style.border = '1px solid red';
  } else {
    err.innerHTML = '';
    el.style.border = '';
  }
  setBtnState();
}

function setBtnState() {
  btn.disabled = valli.validate(true).every(info => info.valid) === false;
}

form.addEventListener('valli', callback, false);


ビルドイン・バリデータ
Equal
Different
Within




